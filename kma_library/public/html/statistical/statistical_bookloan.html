<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thống kê người mượn</title>

  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

  <!-- CSS chung -->
  <link rel="stylesheet" href="../../css/00_variables.css">
  <link rel="stylesheet" href="../../css/01_reset.css">
  <link rel="stylesheet" href="../../css/02_layout.css">
  <link rel="stylesheet" href="../../css/03_header.css">
  <link rel="stylesheet" href="../../css/04_components.css">
  <link rel="stylesheet" href="../../css/05_table_actions.css">
  <link rel="stylesheet" href="../../css/06_modal.css">
  <link rel="stylesheet" href="../../css/07_responsive.css">

  <!-- CSS riêng -->
  <link rel="stylesheet" href="../../css/statistical_bookloan.css">
</head>
<body>
  <main id="section-bookloan" class="content">
    <div class="page-head">
      <h1>Thống kê người mượn</h1>
      <div class="page-controls">
        <button id="btn-refresh" title="Refresh"><i class='bx bx-refresh'></i></button>
        <button id="btn-print" title="Print"><i class='bx bx-printer'></i></button>
        <div class="export">
          <button id="btn-export" aria-haspopup="menu"><i class='bx bx-export'></i> Export <i class='bx bx-chevron-down'></i></button>
          <div class="export-menu" id="export-menu" aria-hidden="true" style="display:none">
            <button data-type="csv">Export CSV</button>
            <button data-type="json">Export JSON</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Cards: 1 lớn bên trái + 2 cột phải (mỗi cột 2 thẻ) -->
    <section class="loan-cards-grid">
      <div class="loan-card card-tall gradient-blue">
        <div class="icon"><i class='bx bxs-group'></i></div>
        <div class="value" id="card-total-borrowers">0</div>
        <div class="label">Tổng người mượn</div>
        <div class="splash"></div>
      </div>

      <div class="loan-card gradient-indigo">
        <div class="icon"><i class='bx bx-layer'></i></div>
        <div class="value" id="card-total-qty">0</div>
        <div class="label">Tổng số lượng mượn</div>
        <div class="splash"></div>
      </div>
      <div class="loan-card gradient-green">
        <div class="icon"><i class='bx bx-time-five'></i></div>
        <div class="value" id="card-current">0</div>
        <div class="label">Người đang mượn</div>
        <div class="splash"></div>
      </div>

      <div class="loan-card gradient-rose">
        <div class="icon"><i class='bx bx-error-circle'></i></div>
        <div class="value" id="card-overdue">0</div>
        <div class="label">Người mượn quá hạn</div>
        <div class="splash"></div>
      </div>
      <div class="loan-card gradient-amber">
        <div class="icon"><i class='bx bx-calendar-check'></i></div>
        <div class="value" id="card-due">0</div>
        <div class="label">Sách đến hẹn trả</div>
        <div class="splash"></div>
      </div>
    </section>

    <!-- Bảng -->
    <section class="card" id="section-loan-table">
      <div class="card-header">
        <h2>Danh sách mượn</h2>
        <div class="card-controls">
          <label class="rows-per-page">
            Row Per Page
            <select id="select-page-size">
              <option value="10" selected>10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </label>

          <!-- Combobox Tình trạng (thay vì Filter) -->
          <label class="status-filter">
            Tình trạng
            <select id="select-status">
              <option value="">Mặc định</option>
              <option value="dang muon">Đang mượn</option>
              <option value="den hen tra">Đến hẹn trả</option>
              <option value="qua han">Quá hạn</option>
              <option value="da tra">Đã trả</option>
            </select>
          </label>

          <div class="table-search">
            <input id="table-search" placeholder="Tìm trong bảng..." type="search" />
          </div>
        </div>
      </div>

      <div class="card-body" style="overflow-x:auto;">
        <table id="loan-table" class="table" style="min-width: 1120px;">
          <thead>
            <tr id="loan-thead-row"></tr>
          </thead>
          <tbody></tbody>
        </table>
        <div id="table-empty" class="muted" hidden>Không có dữ liệu.</div>
        <div class="card-footer">
          <div id="table-info" class="table-info"></div>
          <div id="pagination" class="pagination"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- APIs cần thiết -->
  <script src="../../js/books_js/book_api.js"></script>
  <script src="../../js/cardregister_js/cardregister_api.js"></script>
  <!-- Nếu dự án dùng đường dẫn khác cho LoanAPI, cập nhật lại dòng dưới -->
  <script src="../../js/bookloan_js/bookloan_api.js"></script>

  <!-- JS riêng -->
  <script src="../../js/statistical_js/statistical_bookloan.js"></script>
</body>
</html>